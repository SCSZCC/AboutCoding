# Python 字符串格式化输出

因为最近写的内容涉及到字符串格式化输出，因此打算写个文档笔记。



字符串格式化输出主要有三种，分别是%、format函数和f-string的方式。

使用字符串格式化输出，可以提高代码简洁度，试想将不同的数据类型同时在print函数下进行输出，这个过程中需要加入多少的标点符号，以及来回切换。使用字符串格式化输出就可以在一定程度上避免这些问题。并且使输出的内容按照一定的格式进行呈现。



#### 1.%占位符

通过字符串格式化符号%，可以将指定的数据的类型转换成字符串。

| 符号z  | 作用                                             |
| ------ | ------------------------------------------------ |
| %s     | 以字符串进行格式化输出                           |
| %d     | 以十进制整数进行格式化输出                       |
| %f、%F | 以十进制浮点数进行格式化输出                     |
| %c     | 以字符及其ASCII进行格式化输出                    |
| %e     | 以科学计数法表示的浮点数（e 小写）进行格式化输出 |
| %E     | 以科学计数法表示的浮点数（E 大写）进行格式化输出 |
| %x、%X | 以带符号的十六进制整数进行格式化输出             |
| ....   | .....                                            |

需要注意的是%在Python的数学运算当中的主要作用是取余数。

**以一个示例讲解%的使用**

**使用示例程序：**

```python
name = '张三'
age = 30
height = 190

print("姓名：%s 年龄：%d 身高：%d" % (name, age, height))
```

输出结果：**姓名：张三 年龄：30 身高：190**

在使用过程中（name, age, height）是和前面的顺序一一对应的，如果顺序乱了，也许程序能够正常执行，但是输出的结果可能是错误的。

但是这个程序有个比较不合理的地方，那就是一个人的身高不一定是一个整数，如果用%d去对height进行格式化输出就会存在问题。

**如以下程序：**

```python
name = '张三'
age = 30
height = 190.5

print("姓名:%s 年龄：%d 身高：%d" % (name, age, height))
```

输出结果：**姓名：张三 年龄：30 身高：190**

可以发现输出的结果是和上面的一样的。由于身高的数值可能是浮点数，因此在这里需要使用%f的方式进行格式化输出。

**再修改的程序：**

```python
name = '张三'
age = 30
height = 190.5

print("姓名:%s 年龄：%d 身高：%f" % (name, age, height))
```

输出结果：**姓名：张三 年龄：30 身高：190.500000**

输出的结果似乎还是不如人意，这是因为%f默认保留6位小数，如果要保留指定位数的小数，需要对%f这个符号就行修改。保留一位小数则是:%.1f，保留两位小数则是%.2f，以此类推。并且在进行浮点数转化的过程中会进行四舍五入的操作。



#### 2.format函数格式化输出

format函数是Python2.6版本开始加入的。它的功能比前面的%的方式更加强大。format函数使用{}作为占位符来进行格式化输出。

format函数可以像%格式化输出一样按照顺序进行转化，也可以指定顺序来进行输出

```python
name = '张三'
age = 30
height = 190.5

# 按照顺序进行输出
print("姓名:{} 年龄：{} 身高：{}" .format(name, age, height))

# 不按照顺序进行输出
print("姓名:{1} 年龄：{0} 身高：{2}" .format(age, name, height))
```

输出结果：**姓名：张三 年龄：30 身高：190.5**

​                   **姓名：张三 年龄：30 身高：190.5**

同样在实际使用过程中，也能够对浮点数保留的小数点位数进行设定。通过在{ }内加入  :.2f 的方式设定保留小数点。分号前面填入的是指定的参数顺序，如果是默认顺序则为空。分号后面的.2f表示保留2位小数。.3f则表示保留三位小数点，以此类推。

```
name = '张三' 
age = 30
height = 190.5

# 按照顺序进行输出
print("姓名:{} 年龄：{} 身高：{:.2f}" .format(name, age, height))
```

输出结果：**姓名：张三 年龄：30 身高：190.50**



#### 3.f-string格式化输出

f-string格式化输出是Python3.6版本增加的功能。相比format函数来说，它使用起来更加简洁。编写代码起来也更简单。它还是用到了{}作为占位符，区别在于它直接在{}填入参数。只需要对要转化的内容前面增加一个f。

**使用示例：**

```python
name = '张三'
age = 30
height = 190.5

print(f"姓名：{name} 年龄：{age} 身高：{height}")
```

输出结果：**姓名：张三 年龄：30 身高：190.5**

在处理浮点数方面，和format函数的方式一致。

```
name = '张三'
age = 30
height = 190.5

print(f"姓名：{name} 年龄：{age} 身高：{height:.2f}")
```

输出结果：**姓名：张三 年龄：30 身高：190.50**